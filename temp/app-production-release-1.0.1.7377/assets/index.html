<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>主页面</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
	</head>

	<body onload="onLoad()">
		测试界面<br>
		<input type="button" value="开始加载" onclick="loading()">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		<input type="button" value="初始化菜单" onclick="setMenu()">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		<input type="button" value="打电话：1008611" onclick="callPhone()"><br><p>
		<input type="button" value="发短信" onclick="sendSms()">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		<input type="button" value="打开短信界面" onclick="openSms()">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		<input type="button" value="扫描二维码" onclick="scanBarcode()"><br><p>
		<input type="button" value="选择图片" onclick="selectImage()">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		<input type="button" value="选择文件" onclick="selectFile()">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		<input type="button" value="查看图片" onclick="viewImage()"><br><p>
		<input type="button" value="浏览器打开" onclick="openByBrowser()">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		<input type="button" value="检查APP的安装" onclick="checkInstalledApps()"><br><p>
		<input type="button" value="启动人大会议终端" onclick="launchRd()">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		<input type="button" value="获取网络类型" onclick="getNetworkType()"><br><p>
		<input type="button" value="toast" onclick="toast()">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		<input type="button" value="alert" onclick="alert('周小欠')">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		<input type="button" value="confirm" onclick="confirm1()">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		<input type="button" value="prompt" onclick="prompt1()"><br><p>
		<input type="button" value="modal" onclick="modal()">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		<input type="button" value="震动" onclick="vibrate()">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		<input type="button" value="hello" onclick="hello()">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		<input type="button" value="刷新" onclick="reload()"><br><p>
		<input type="button" value="设置标题" onclick="setTitle()">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

		<div id="testresult"></div>
	</body>
	<script src="coffice.js" type="text/javascript"></script>
	<script>

		function setTitle() {
			Coffice.callNative({
				method:"setTitle",
				params:"哈哈哈哈"
			});
		}

		function reload() {
			Coffice.callNative({
				method:"reload"
			});
		}

		function onLoad() {
			Coffice.callNative({
				method:"config",
				params:{
					jsApiList:["hello", "addEventListener", "showPreloader", "hidePreloader", "setMenu",
					"call", "sendSms", "openSms", "scanBarcode", "selectImage", "selectFile", "imagePreview",
					"openByBrowser", "playAudo", "checkInstalledApps", "launchApp", "getNetworkType", "toast",
					"modal", "vibrate", "reload", "setTitle"]
				},
				success: function(data) {
					Coffice.addEventListener("back", function(){
						Coffice.callNative({
							method:"toast",
							params:{
								icon:"fail",
								text:"返回事件"
							}
						});
					})
				}
			});
		}

		function callPhone() {
			Coffice.callNative({
				method:"call",
				params:"1008611"
			})
		}

		function checkInstalledApps() {
			Coffice.callNative({
				method : "checkInstalledApps",
				params : ["com.xdja.soa.frame", "com.xdja.rdworkclient", "com.xdja.qq"],
				success : function(installed) {
					document.getElementById("testresult").innerHTML += "<br>已安装APP：" + installed;
				}
			})
		}

		function modal() {
			Coffice.callNative({
				method:"modal",
				params:{
					title:"模态窗口",
					content:"模态窗口的内容",
					buttons:["了解更多","知道了"]
				},
				success : function(data) {
					document.getElementById("testresult").innerHTML += "<br>" + data.buttonIndex;
				}
			});
		}

		function toast(msg) {
			Coffice.callNative({
				method:"toast",
				params:{
					icon:"success",
					text:"yes",
					duration:3
				}
			});
		}

		function confirm1() {
			var r = confirm("OK?");
			document.getElementById("testresult").innerHTML += "<br>confirm：" + r;
		}

		function prompt1() {
			var name=prompt("你的名字是：", "zxq");
			if(name != null && name != "") {
				document.getElementById("testresult").innerHTML += "<br>prompt：" + name;
			}
		}

		function vibrate() {
			Coffice.callNative({
				method:"vibrate",
				params:"1500",
				success:function(data) {
					document.getElementById("testresult").innerHTML += "<br>" + data;
				}
			});
		}

		function hello() {
			Coffice.callNative({
				method:"hello",
				success:function(data) {
					document.getElementById("testresult").innerHTML += "<br>Hello：" + data;
				}
			});
		}

		function loading() {
			Coffice.callNative({
				method:"showPreloader"
			});
			setTimeout(function(){
				Coffice.callNative({
					method:"hidePreloader"
				});
			}, 3000);
		}

		function setMenu() {
			Coffice.addEventListener("menuclick", function(menuId){
				switch (menuId)
				{
				case 1:
					alert("menu1click");
					break;
				case 2:
					alert("menu2click");
					break;
				case 3:
					alert("menu3click");
					break;
				case 4:
					alert("menu4click");
					break;
				case 5:
					alert("menu5click");
					break;
				}
			});
			Coffice.callNative({
				method:"setMenu",
				params:[{
					id : 1,
					showAsAction : 0,
					title : "扫描",
					icon : "setting"
				}, {
					id : 2,
					showAsAction : 1,
					title : "菜单二",
					icon : "photo"
				}, {
					id : 3,
					showAsAction : 2,
					title : "菜单三",
					icon : "personal"
				}, {
					id : 4,
					showAsAction : 4,
					title : "菜单四",
					icon : "plus"
				}, {
					id : 5,
					showAsAction : 8,
					title : "菜单五",
					icon : "over"
				}]
			});
		}

		
		function sendSms() {
			Coffice.callNative({
				method:"sendSms",
				params:{
					number : "10086",
					message : "CXBY"
				}
			})
		}
		function openSms() {
			Coffice.callNative({
				method:"openSms",
				params:{
					number : "10086",
					message : "CXBY"
				}
			})
		}

		function scanBarcode() {
			Coffice.callNative({
				method : "scanBarcode",
				success : function(barcode){
					document.getElementById("testresult").innerHTML += "<br>扫描二维码：" + barcode;
				}
			})
		}

		function selectImage() {
			Coffice.callNative({
				method : "selectImage",
				params : {
					maxSelectSize : 4,
					allowTakePic : false
				},
				success : function(paths) {
					//目前只支持返回图片路径，以","分割多个图片，网页应该不能显示本地图片。
					//壳，应该在选完图片后，将图片上传到指定的服务上，然后将服务返回的图片信息返回给网页，包括图片的URL地址，
					//这样，网页就可以显示图片。
					document.getElementById("testresult").innerHTML += "<br>选择图片结果：" + paths;
				}
			})
		}

		function selectFile() {
			Coffice.callNative({
				method : "selectFile",
				success : function(path) {
					document.getElementById("testresult").innerHTML += "<br>选择图片结果：" + path;
				}
			})
		}

		function viewImage() {
			Coffice.callNative({
				method : "imagePreview",
				params : "http://www.baidu.com/img/bd_logo1.png"
			})
		}

		function openByBrowser() {
			Coffice.callNative({
				method : "openByBrowser",
				params : "http://www.baidu.com/img/bd_logo1.png"
			})
		}

		

		function launchRd() {
			Coffice.callNative({
				method:"launchApp",
				params:{
					app:"com.xdja.rdworkclient",
					activity:"com.xdja.rdworkclient.LunchActivity"
				},
				success:function(data) {
					document.getElementById("testresult").innerHTML += "<br>启动人大：" + data.result;
				}
			});
		}

		function getNetworkType() {
			Coffice.callNative({
				method:"getNetworkType",
				success:function(data) {
					document.getElementById("testresult").innerHTML += "<br>网络类型：" + data.type + ", " + data.desc;
				}
			})
		}
	</script>
</html>